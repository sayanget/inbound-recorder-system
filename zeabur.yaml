# Zeabur 部署配置

# 服务配置
services:
  - name: inbound-recorder
    type: web
    buildCommand: pip install -r requirements.txt
    startCommand: gunicorn --bind 0.0.0.0:$PORT --workers 2 --threads 4 --timeout 120 single_app:app
    
    # 环境变量
    env:
      - key: ENVIRONMENT
        value: production
      - key: DATABASE_URL
        value: ${POSTGRES_URL}  # 从 Neon 服务自动注入
      - key: SECRET_KEY
        value: ${SECRET_KEY}  # 需要在 Zeabur 控制台设置
      
    # 健康检查
    healthCheck:
      path: /
      interval: 30
      timeout: 10
